{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhuojun/Documents/HBuilderXProject/xtmusic-uniapp/pages/login/login.vue?4c8b","webpack:////Users/zhuojun/Documents/HBuilderXProject/xtmusic-uniapp/pages/login/login.vue?f20a","webpack:////Users/zhuojun/Documents/HBuilderXProject/xtmusic-uniapp/pages/login/login.vue?700e","webpack:////Users/zhuojun/Documents/HBuilderXProject/xtmusic-uniapp/pages/login/login.vue?aaee","uni-app:///pages/login/login.vue","webpack:////Users/zhuojun/Documents/HBuilderXProject/xtmusic-uniapp/pages/login/login.vue?aebf","webpack:////Users/zhuojun/Documents/HBuilderXProject/xtmusic-uniapp/pages/login/login.vue?6d91"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,oVAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsEv1B;AACA;AACA;AACA,gF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,gBADA,EAEA,YAFA,EAGA,4BAHA,EAIA,oBAJA,EAKA,cALA,EAMA,YACA,gBADA,EAEA,kBAFA,EAGA,mBAHA,EANA,EAWA,SACA,SACA,QACA,0CADA,EAEA,iEAFA,CADA,EADA,EAOA,WACA,2EADA,EAPA,EAUA,YACA,QACA,kEADA,CADA,EAVA,EAXA,GA6BA,CA/BA,EAgCA,MAhCA,oBAgCA,CACA;AACA,wBACA,iDACA,CApCA,EAqCA,MArCA,oBAqCA,CAEA,qBAEA,CAzCA,EA0CA,QA1CA,sBA0CA,CACA,0BACA,CA5CA,EA6CA,WACA,eADA,6BACA,CACA,wEACA,CAHA,EAIA,YAJA,0BAIA,CACA,sDACA,gBACA,oEACA,+CACA,CAHA,MAGA,CACA,mBACA,CACA,CAZA,EAaA,YAbA,0BAaA,CACA,iDACA,iDACA,CAhBA,EAiBA,WAjBA,yBAiBA,kBACA,8DACA,kCACA,sDACA,uBACA,iDACA,CAFA,MAEA,CACA;AACA;AACA,SANA,EAMA,KANA,CAMA;AACA;AACA,SARA,EAQA,OARA,CAQA;AACA;AACA;AACA,SAXA;AAYA,OAdA;AAeA,KAjCA;AAkCA,SAlCA,mBAkCA;AACA;AACA;AACA;AACA,sBADA;AAEA,mGAFA;AAGA,0BAHA;;AAKA;AACA;AACA;AACA,SAHA,EAGA,KAHA,CAGA;AACA;AACA,yBADA;AAEA,8BAFA;;AAIA;AACA,SATA,EASA,OATA,CASA;AACA;AACA,SAXA;AAYA,OAnBA;AAoBA,KAvDA;AAwDA,eAxDA,yBAwDA;AACA;AACA;AACA;AACA,OAFA,EAEA,OAFA,CAEA;AACA;AACA;AACA,OALA;AAMA,KAhEA,EA7CA,E;;;;;;;;;;;;;AC1EA;AAAA;AAAA;AAAA;AAA0jD,CAAgB,07CAAG,EAAC,C;;;;;;;;;;;ACA9kD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&scoped=true&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=b237504c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b237504c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&scoped=true&\"","var components\ntry {\n  components = {\n    uniForms: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniEasyinput: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"login-wrapper\">\n    <view class=\"login-title\">\n      <image src=\"../../static/logo.png\" />\n      <text>网易云音乐</text>\n    </view>\n\t\t<uni-forms\n      ref=\"form\"\n      :model-value=\"formData\"\n      :rules=\"rules\"\n    >\n      <uni-forms-item\n        label=\"手机号\"\n        name=\"phone\"\n      >\n        <uni-easyinput\n          v-model=\"formData.phone\"\n          placeholder=\"请输入手机号\"\n        />\n      </uni-forms-item>\n      <uni-forms-item\n        v-if=\"loginType === 'captcha'\"\n        label=\"验证码\"\n        name=\"captcha\"\n      >\n        <view class=\"captcha-form\">\n          <uni-easyinput\n            class=\"captcha-input\"\n            v-model=\"formData.captcha\"\n            placeholder=\"请输入验证码\"\n          />\n          <button\n            class=\"captcha-button\"\n            size=\"mini\"\n            :disabled=\"countdown > 0\"\n            @click=\"sendCaptcha\"\n          >\n            获取验证码\n            {{ countdown > 0 ? `(${countdown})` : '' }}\n          </button>\n        </view>\n      </uni-forms-item>\n      <uni-forms-item\n        v-if=\"loginType === 'password'\"\n        label=\"密码\"\n        name=\"password\"\n      >\n        <uni-easyinput\n          v-model=\"formData.password\"\n          type=\"password\"\n          placeholder=\"请输入密码\"\n        />\n      </uni-forms-item>\n    </uni-forms>\n    <view class=\"login-type-button\">\n      <text @click=\"toggleLoginType\">\n        {{ loginType === 'password' ? '验证码登录' : '密码登录' }}\n      </text>\n    </view>\n    <button\n      class=\"button-default login-button\"\n      :loading=\"loading\"\n      @click=\"login\"\n    >\n      登录\n    </button>\n\t</view>\n</template>\n\n<script>\n  import md5 from '@/utils/md5.js'\n  import globalApi from '@/api/login.js'\n  import api from './api'\n  import { GET_USER_INFO } from '@/store/mutations-types.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n        timer: undefined,\n        countdown: 0,\n        SEND_CAPTCHA: 'SEND_CAPTCHA',\n        loginType: 'captcha',\n        loading: false,\n\t\t\t\tformData: {\n          phone: undefined,\n          captcha: undefined,\n          password: undefined\n        },\n        rules: {\n          phone: {\n            rules: [\n              { required: true, errorMessage: '请输入手机号' },\n              { pattern: '^[1][3,4,5,7,8,9][0-9]{9}$', errorMessage: '手机号不正确' }\n            ]\n          },\n          captcha: {\n            rules: [{ required: this.loginType === 'captcha', errorMessage: '请输入验证码' }]\n          },\n          password: {\n            rules: [\n              { required: this.loginType === 'password', errorMessage: '请输入密码' }\n            ]\n          },\n          \n        }\n\t\t\t}\n\t\t},\n    onLoad () {\n      // 计算发送验证码禁用时长\n      this.getCountdown()\n      this.timer = setInterval(this.getCountdown, 500)\n    },\n    onShow () {\n      // #ifdef MP-WEIXIN\n      uni.hideHomeButton()\n      // #endif\n    },\n    onUnload () {\n      clearInterval(this.timer)\n    },\n    methods: {\n      toggleLoginType () {\n        this.loginType = this.loginType === 'password' ? 'captcha' : 'password'\n      },\n      getCountdown () {\n        const timestamp = uni.getStorageSync(this.SEND_CAPTCHA)\n        if (timestamp) {\n          const countdown = parseInt((timestamp - new Date().getTime()) / 1000)\n          this.countdown = countdown < 0 ? 0 : countdown\n        } else {\n          this.countdown = 0\n        }\n      },\n      setCountdown () {\n        const timestamp = new Date().getTime() + 1000 * 60\n        uni.setStorageSync(this.SEND_CAPTCHA, timestamp)\n      },\n      sendCaptcha () {\n        this.$refs.form.validateField(['phone']).then(res => {\n          const params = { phone: res.phone }\n          api.sendCaptcha(params).then(res => {\n            if (res.code === 200) {\n              uni.showToast({ icon: 'none', title: '验证码已发送' })\n            } else {\n              throw res.message\n            }\n          }).catch(e => {\n            uni.showToast({ icon: 'error', title: '发送失败：' + e })\n          }).finally(() => {\n            this.setCountdown()\n            this.getCountdown()\n          })\n        })\n      },\n      login () {\n        this.$refs.form.validate().then(({ phone, captcha, password }) => {\n          this.loading = true\n          const params = {\n            phone,\n            md5_password: this.loginType === 'password' ? md5.hex_md5(password) : undefined,\n            captcha\n          }\n          globalApi.loginCellPhone(params).then(res => {\n            uni.setStorageSync('cookie', res.cookie)\n            this.getUserInfo()\n          }).catch(e => {\n            uni.showToast({\n              icon: 'error',\n              title: '登录失败：' + e\n            })\n            console.error('登录失败：', e)\n          }).finally(() => {\n            this.loading = false\n          })\n        })\n      },\n      getUserInfo () {\n        this.loading = true\n        this.$store.dispatch(GET_USER_INFO).then(res => {\n          uni.switchTab({ url: '/pages/search/search' })\n        }).finally(() => {\n          uni.removeStorageSync(this.SEND_CAPTCHA)\n          this.loading = false\n        })\n      }\n    }\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n.login-wrapper {\n  padding: 24px;\n  .login-title {\n    font-size: 28px;\n    font-weight: 600;\n    margin: 32px 0 48px 0;\n    text-align: center;\n    image {\n      width: 48px;\n      height: 48px;\n      margin-right: 12px;\n    }\n    image, text {\n      display: inline-block;\n      vertical-align: middle;\n    }\n  }\n  .captcha-form {\n    .captcha-input, .captcha-button {\n      display: inline-block;\n      vertical-align: middle;\n    }\n    .captcha-input {\n      width: calc(100% - 144px);\n    }\n    .captcha-button {\n      width: 136px;\n      height: 36px;\n      line-height: 36px;\n      margin-left: 8px;\n    }\n  }\n  .login-type-button {\n    text-align: right;\n    color: #666666;\n  }\n  .login-button {\n    margin-top: 12px;\n  }\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=b237504c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=b237504c&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1647483553278\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}